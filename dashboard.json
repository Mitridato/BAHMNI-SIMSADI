angular.module('bahmni.common.displaycontrol.custom')
    .directive('BirthCertificate',['observationsService','appService','spinner',function (observationsService, appService, spinner) {
        var link = function ($scope) {
            var conceptNames = ["HEIGHT"];
            $scope.contentUrl = appService.configBaseUrl() +"/customDisplayContol/views/birthCertificate.html";
            spinner.forPromise(observationsService.fetch($scope.patient.uuid, conceptNames, "latest", undefined, $scope.visitUuid, undefined).then(function (response) {
                $scope.observations = response.data;
            }))
        };
        return {
            restrict: 'E',
            templateUrl: '/home/mitridato/clinic-config/openmrs/apps/customDisplayControl/views/birthCertificate.html',
        }
    }]),
angular.module('EnvioOrdenes')
    .directive('Sendorders',['orderService','labOrders','Sendorders','pacsOrders', function (orderService, labOrders, Sendorders, pacsOrders) {
        var controller = function ($scope, $rootScope, ngDialog, visitActionsService) {
            

            $scope.isDataPresent = function () {
                if (($scope.pacsOrders && $scope.pacsOrders.length == 0) || ($scope.labOrderSections && $scope.labOrderSections.length == 0)) {
                    return $scope.$emit("no-data-present-event") && false;
                }
                return true;
            };

            $scope.downloadOrder = function (visitStartDate, visitUuid) {
                $rootScope.$broadcast("event:downloadOrderFromDashboard", visitStartDate, visitUuid);
            };
            $scope.isOtherActiveSection = function (dateString) {
                return dateString === Bahmni.Clinical.Constants.labOrderSection || dateString === Bahmni.Clinical.Constants.radiologyOrderSection;
            };
            $scope.shareOrders = function (visitStartDate, visitUuid) {
                $rootScope.$broadcast("event:shareOrdersViaEmail", visitStartDate, visitUuid);
            };
        };

        return {
            templateUrl: "customDisplayControl/views/Emailtemplate.html",
            scope: {
                OrderSections: "=",
                params: "="
            },
            controller: controller
        };
    }]);
